<!DOCTYPE html>
<html>
  <head>
    <link href='../public/public.css' rel='stylesheet' media='screen'>
  </head>
  <body>
    <script src='../public/public.js'></script>
    <script type='text/javascript'>

      var Rating = require('ember-rating');
      var compile = Em.Handlebars.compile;
      var controller = Em.Controller.create({
        content: 2
      });
      var view = Rating.create({
        rating: 3,
        didInsertElement: function() {
          this.updateContextRating.bind(this);
          this.addObserver('rating', this.updateContextRating.bind(this));
        },
        updateContextRating: function() {
          var rating;
          rating = this.get('rating');
          controller.set('content', rating);
        }
      });

      view.appendTo('body');

      view = Em.View.create({
        tagName: 'h2',
        context: controller,
        template: compile('{{view.context.content}}')
      });

      view.appendTo('body');

    </script>
  </body>
</html>