!!! 5
html
  head
    link(href='../build/build.css', rel='stylesheet', media='screen')

  body

    script(src='../build/build.js')
    :coffeescript

      Rating = require 'ember-rating'

      compile = Em.Handlebars.compile

      controller = Em.Controller.create
        content: 2

      view = Rating.create
        rating: 3
        didInsertElement: ->
          @updateContextRating.bind @
          @addObserver 'rating', @updateContextRating.bind @
        updateContextRating: ->
          rating = @get 'rating'
          controller.set 'content', rating
      view.appendTo 'body'

      view = Em.View.create
        tagName: 'h2'
        context: controller
        template: compile '{{view.context.content}}'
      view.appendTo 'body'
      